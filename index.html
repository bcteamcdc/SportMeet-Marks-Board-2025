<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>InterHouse Sports Scores 2025</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <link rel="icon" type="image/png" sizes="32x32"
    href="https://i.ibb.co/x8H49CbB/New-Project-1-1.png">
  <!-- Chart.js Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>

<body>
  <div class="container">
    <header>
      <div class="header-left">
        <div class="profile-icon"></div>
        <div class="club-icon"></div>
        <div class="trophy-icon">üèÜ</div>
        <div class="header-title">InterHouse Sports Scores 2025</div>
      </div>
      <div class="nav-tabs">
        <a class="nav-tab" id="leaderboard-tab">Leaderboard</a>
        <a class="nav-tab" id="scores-tab">Scores</a>
        <a class="nav-tab" id="moments-tab">Winning Moments</a>
        <a class="nav-tab" id="analytics-tab">Analytics</a>
      </div>
    </header>
    
  <div class="loading-screen" id="loadingScreen">
    <div class="loading-logo"></div>
    <div class="loading-text typing-text">
      <span class="team-part">#team</span><span class="cdc-part">cdc</span>
    </div>
  </div>

    </div>

    <!-- Leaderboard Page -->
    <div id="leaderboard-page" class="page" style="display: none;">
      <div class="page-title">
        <span class="page-title-icon">‚≠ê</span>
        <span>Overall House Rankings 2025</span>
      </div>
      <div class="rankings-grid" id="rankings-container"></div>
      <br><br>
      <!-- App Download Section -->
      <div class="app-download-section">
        <div class="app-section-header">
          <h2 class="app-section-title">üì± Download Mobile App</h2>
          <p class="app-section-subtitle">Get the InterHouse Sports Scores 2025 mobile app for real-time updates and offline access</p>
        </div>

        <div class="app-files-grid">
          <div class="app-file-card">
            <div class="file-icon-container apk-icon">
              <div class="file-icon">üì±</div>
            </div>
            <div class="file-info">
              <div class="file-name">InterHouse Sports Score 2025</div>
              <span class="file-extension">.APK</span>
              <div class="file-details">
                <span class="file-size">12.5 MB</span>
                <span class="file-version">v1.0.2</span>
              </div>
              <a href="https://mega.nz/file/WBtQ1CpC#R2hqT7YiFWmJdnDv8HFIDJC60Np4kSzqul72g9dGwEc" class="download-button">
                <span>üì•</span>
                Download for Android
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="coding-club-section">
        <div class="section-header">
          <h2 class="section-title">
            <i class="fas fa-code title-icon"></i>
            Coding Club Official Hub
          </h2>
          <p class="section-subtitle">Connecting Innovation, Code, and Community</p>
          <p class="section-description">
            Explore our digital ecosystem where coding excellence meets creative innovation. 
            Connect with us across multiple platforms and discover the latest in technology, 
            programming tutorials, and collaborative projects.
          </p>
        </div>

        <div class="club-content-grid">
          <div class="website-card">
            <div class="card-header">
              <div class="card-icon">
                <i class="fas fa-globe"></i>
              </div>
              <div>
                <h3 class="card-title">Official Website</h3>
                <p class="card-subtitle">Your gateway to digital excellence</p>
              </div>
            </div>

            <a href="https://teamcdc.netlify.app" class="website-link" target="_blank">
              <i class="fas fa-external-link-alt"></i>
              Visit teamcdc.netlify.app
            </a>

            <ul class="website-features">
              <li class="feature-item">
                <i class="fas fa-globe feature-icon"></i>
                Bandaranayake College Gampaha Coding Club
              </li>
              <li class="feature-item">
                <i class="fas fa-rocket feature-icon"></i>
                Latest project showcases and portfolios
              </li>
              <li class="feature-item">
                <i class="fas fa-calendar-alt feature-icon"></i>
                Event schedules and workshop announcements
              </li>
              <li class="feature-item">
                <i class="fas fa-file-alt feature-icon"></i>
                Blog posts & articles (Blog section)
              </li>
              <li class="feature-item">
                <i class="fas fa-users feature-icon"></i>
                Top Members / Leaders (Leaders page)
              </li>
            </ul>
          </div>

          <div class="social-card">
            <div class="card-header">
              <div class="card-icon">
                <i class="fas fa-share-alt"></i>
              </div>
              <div>
                <h3 class="card-title">Social Networks</h3>
                <p class="card-subtitle">Connect with our community</p>
              </div>
            </div>

            <div class="social-platforms">
              <a href="https://whatsapp.com/channel/0029Vb8DCeW0bIddkcNUZ51J" target="_blank" class="social-platform whatsapp">
                <div class="social-icon">
                  <i class="fab fa-whatsapp"></i>
                </div>
                <div class="social-name">WhatsApp</div>
                <div class="social-handle">Channel Updates</div>
              </a>

              <a href="https://facebook.com/bandaranayakecollege" target="_blank" class="social-platform facebook">
                <div class="social-icon">
                  <i class="fab fa-facebook-f"></i>
                </div>
                <div class="social-name">Facebook</div>
                <div class="social-handle">@bandaranayakecollege</div>
              </a>

              <a href="https://www.instagram.com/teamcdcbc?igsh=d2RkbTVvMXl5aTRk" target="_blank" class="social-platform instagram">
                <div class="social-icon">
                  <i class="fab fa-instagram"></i>
                </div>
                <div class="social-name">Instagram</div>
                <div class="social-handle">@teamcdcbc</div>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Scores Page -->
    <div id="scores-page" class="page">
      <div class="page-title">
        <span class="page-title-icon">üìä</span>
        <span>Sports Scores 2025</span>
      </div>
      <div class="sports-grid" id="sports-container"></div>
    </div>

    <!-- Winning Moments Page -->
    <div id="moments-page" class="page" style="display: none;">
      <div class="page-title">
        <span class="page-title-icon">üì∏</span>
        <span>Winning Moments 2025</span>
      </div>
      <!-- Image Slideshow -->
      <div class="slideshow-container" id="slideshow-container"></div>
      <div class="slideshow-controls" id="slideshow-controls"></div>
      <br>
      <!-- Moments Grid -->
      <div class="moments-grid" id="moments-container"></div>
    </div>
    
    <!-- House Details Page -->
    <div id="house-details-page" class="page" style="display: none;">
      <button class="back-button" id="back-to-leaderboard">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Back to Leaderboard
      </button>
      <div class="page-title">
        <span class="page-title-icon">üè†</span>
        <span id="house-details-title">House Details</span>
      </div>
      <div class="sports-grid" id="house-sports-container"></div>
    </div>

    <!-- Athletics Details Page -->
    <div id="athletics-details-page" class="page" style="display: none;">
      <button class="back-button" id="back-to-scores">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Back to Sports
      </button>
      <div class="page-title">
        <span class="page-title-icon">üèÉ</span>
        <span>Athletics Details</span>
      </div>
      <div class="athletics-container" id="athletics-container"></div>
    </div>

    <!-- Analytics Dashboard Page -->
    <div id="analytics-page" class="page" style="display: none;">
      <div class="page-title">
        <span class="page-title-icon">üìà</span>
        <span>Performance Analytics</span>
      </div>
      <div class="dashboard-container">
        <div class="hcard">
          <div class="hcard-header">
            <h2 class="hcard-title">Historical Performance Comparison</h2>
            <p class="hcard-subtitle">Compare house performance across years</p>
          </div>
          
          <!-- Filter Controls -->
          <div class="filters-grid">
            <div class="filter-group">
              <div class="filter-label-container">
                <label class="filter-label">House</label>
                <div class="tooltip">
                  <span class="tooltip-icon">?</span>
                  <span class="tooltip-text">Select a specific house or view all houses together</span>
                </div>
              </div>
              <div class="filter-options" id="house-options">
                <div class="filter-option active" data-value="All Houses">All Houses</div>
                <div class="filter-option gemunu-option" data-value="Gemunu">Gemunu</div>
                <div class="filter-option vijaya-option" data-value="Vijaya">Vijaya</div>
                <div class="filter-option parakrama-option" data-value="Parakrama">Parakrama</div>
                <div class="filter-option tissa-option" data-value="Tissa">Tissa</div>
              </div>
            </div>
            
            <div class="filter-group">
              <div class="filter-label-container">
                <label class="filter-label">Sport</label>
                <div class="tooltip">
                  <span class="tooltip-icon">?</span>
                  <span class="tooltip-text">Filter by specific sport or view overall performance</span>
                </div>
              </div>
              <div class="filter-options" id="sport-options">
                <div class="filter-option active" data-value="All Sports">Overall</div>
                <div class="filter-option" data-value="bestHouseDesign">Best House Design</div>
                <div class="filter-option" data-value="karate">Karate</div>
                <div class="filter-option" data-value="tableTennis">Table Tennis</div>
                <div class="filter-option" data-value="hardball">HardBall</div>
                <div class="filter-option" data-value="wrestling">Wrestling</div>
                <div class="filter-option" data-value="boxing">Boxing</div>
                <div class="filter-option" data-value="football">Football</div>
                <div class="filter-option" data-value="athletics">Athletics</div>
                <div class="filter-option" data-value="swimming">Swimming</div>
                <div class="filter-option" data-value="tagRugby">Tag Rugby</div>
                <div class="filter-option" data-value="roadRace">Road Race</div>
                <div class="filter-option" data-value="badminton">Badminton</div>
                <div class="filter-option" data-value="chess">Chess</div>
                <div class="filter-option" data-value="volleyball">Volleyball</div>
                <div class="filter-option" data-value="elle">Elle</div>
                <div class="filter-option" data-value="hockey">Hockey</div>
                <div class="filter-option" data-value="softball">Softball</div>
                <div class="filter-option" data-value="basketball">Basketball</div>
              </div>
            </div>
            
            <div class="filter-group">
              <div class="filter-label-container">
                <label class="filter-label">Time Range</label>
                <div class="tooltip">
                  <span class="tooltip-icon">?</span>
                  <span class="tooltip-text">Select the number of years to display</span>
                </div>
              </div>
              <div class="filter-options" id="time-range-options">
                <div class="filter-option active" data-value="5">5 Years</div>
                <div class="filter-option" data-value="3">3 Years</div>
                <div class="filter-option" data-value="2">2 Years</div>
              </div>
            </div>
          </div>
          
          <!-- Chart Type Toggle -->
          <div class="filter-group">
            <label class="filter-label">Chart Type</label>
            <div class="chart-type-toggle">
              <button id="line-chart-btn" class="toggle-btn ">Line Chart</button>
              <button id="bar-chart-btn" class="toggle-btn active">Bar Chart</button>
            </div>
          </div>
          
          <!-- Chart Container -->
          <div class="chart-container">
            <canvas id="performance-chart"></canvas>
          </div>
          
          <!-- Chart Description -->
          <div class="chart-footer" id="chart-description">
            This chart shows the performance of all houses in overall points over the last 5 years.
          </div>
        </div>
      </div>
    </div>
    
<footer class="footer">
  <div class="footer-container">
    <div class="footer-center">
     
    </div>

  </div>

  <div class="footer-socials">
    <a href="https://whatsapp.com/channel/0029Vb8DCeW0bIddkcNUZ51J" target="_blank" class="social-icon whatsapp" title="WhatsApp">
      <i class="fab fa-whatsapp"></i>
    </a>
    <a href="https://facebook.com/bandaranayakecollege" target="_blank" class="social-icon facebook" title="Facebook">
      <i class="fab fa-facebook-f"></i>
    </a>
    <a href="https://www.instagram.com/teamcdcbc?igsh=d2RkbTVvMXl5aTRk" target="_blank" class="social-icon instagram" title="Instagram">
      <i class="fab fa-instagram"></i>
    </a>
  </div>

  <div class="footer-bottom">
<span>¬© 2025 Bandaranayake College <a class="officialweblink" href="https://teamcdc.netlify.app">Coding Club</a>. All rights reserved.</span><br>
     <span class="last-updated">Last Updated: <span id="last-update-date">Aug 08, 2025</span></span>
  </div>
</footer>
  </div>

  <!-- Import Sports Data -->
  <script src="sportsdata.js"></script>
  
  <script>
          window.addEventListener("load", () => {
      setTimeout(() => {
        document.getElementById("loadingScreen").classList.add("hidden");
      }, 2000); // Increased to 5000ms to allow typing animation to complete
    });

    // DOM Elements - Navigation and Pages
    const scoresTab = document.getElementById('scores-tab');
    const leaderboardTab = document.getElementById('leaderboard-tab');
    const momentsTab = document.getElementById('moments-tab');
    const analyticsTab = document.getElementById('analytics-tab');
    
    const scoresPage = document.getElementById('scores-page');
    const leaderboardPage = document.getElementById('leaderboard-page');
    const momentsPage = document.getElementById('moments-page');
    const analyticsPage = document.getElementById('analytics-page');
    const houseDetailsPage = document.getElementById('house-details-page');
    const athleticsDetailsPage = document.getElementById('athletics-details-page');
    
    // DOM Elements - Containers
    const sportsContainer = document.getElementById('sports-container');
    const rankingsContainer = document.getElementById('rankings-container');
    const momentsContainer = document.getElementById('moments-container');
    const houseSportsContainer = document.getElementById('house-sports-container');
    const athleticsContainer = document.getElementById('athletics-container');
    const slideshowContainer = document.getElementById('slideshow-container');
    const slideshowControls = document.getElementById('slideshow-controls');
    
    // DOM Elements - Buttons and Titles
    const houseDetailsTitle = document.getElementById('house-details-title');
    const backButton = document.getElementById('back-to-leaderboard');
    const backToScoresButton = document.getElementById('back-to-scores');
    
    // Slideshow Variables
    let currentSlide = 0;
    let slideshowInterval;
    const slideshowDelay = 2000;

    // Page Navigation Functions
    function showPage(pageElement) {
      // Hide all pages
      const allPages = [scoresPage, leaderboardPage, momentsPage, analyticsPage, houseDetailsPage, athleticsDetailsPage];
      allPages.forEach(page => page.style.display = 'none');
      
      // Show selected page
      pageElement.style.display = 'block';
      
      // Handle slideshow for moments page
      if (pageElement === momentsPage) {
        startSlideshow();
      } else {
        stopSlideshow();
      }
      
      // Initialize chart for analytics page
      if (pageElement === analyticsPage) {
        initChart();
      }
    }

    function setActiveTab(tab) {
      // Remove active class from all tabs
      const allTabs = [scoresTab, leaderboardTab, momentsTab, analyticsTab];
      allTabs.forEach(t => t.classList.remove('active'));
      
      // Set active tab
      tab.classList.add('active');
    }

    // Navigation Event Listeners
    scoresTab.addEventListener('click', () => {
      showPage(scoresPage);
      setActiveTab(scoresTab);
    });

    leaderboardTab.addEventListener('click', () => {
      showPage(leaderboardPage);
      setActiveTab(leaderboardTab);
      renderRankings();
    });

    momentsTab.addEventListener('click', () => {
      showPage(momentsPage);
      setActiveTab(momentsTab);
    });

    analyticsTab.addEventListener('click', () => {
      showPage(analyticsPage);
      setActiveTab(analyticsTab);
    });

    // Back Button Event Listeners
    backButton.addEventListener('click', () => {
      showPage(leaderboardPage);
      setActiveTab(leaderboardTab);
    });

    backToScoresButton.addEventListener('click', () => {
      showPage(scoresPage);
      setActiveTab(scoresTab);
    });

    // Sports Rendering Functions
    function getMaxScore(scores) {
      return Math.max(...scores.map(item => item.score));
    }

    function renderSports() {
      sportsContainer.innerHTML = '';

      sportsData.sports.forEach(sport => {
        const maxScore = getMaxScore(sport.scores);
        const sportCard = document.createElement('div');
        sportCard.className = 'sport-card';
        
        // Add click event for Athletics card
        if (sport.id === "Athletics") {
          sportCard.dataset.sport = "Athletics";
          sportCard.addEventListener('click', () => showAthleticsDetails());
        }

        let sportContent = `
        <div class="sport-header">
          <div class="sport-title">${sport.name}</div>
          <div class="sport-subtitle">${sport.venue}</div>
          <div class="sport-date">${sport.date}</div>
          ${sport.isLive ? '<div class="live-tag"><div class="live-indicator"></div>LIVE</div>' : ''}
        </div>
        `;

        // Add scores for each house
        sport.scores.forEach(score => {
          const percentage = (score.score / maxScore) * 100;
          sportContent += `
          <div class="score-item">
            <div class="score-row">
              <div class="house-name ${score.house.toLowerCase()}">${score.house}</div>
              <div class="house-score">${score.score}</div>
            </div>
            <div class="progress-container">
              <div class="progress-bar ${score.house.toLowerCase()}" style="width: ${percentage}%"></div>
            </div>
          </div>
          `;
        });
        
        // Add details link for Athletics
        if (sport.id === "Athletics") {
          sportContent += `
          <div class="see-more-link"><center>You can see more details - Click on this card</center></div>
          `;
        }

        sportCard.innerHTML = sportContent;
        sportsContainer.appendChild(sportCard);
      });
    }

    // Rankings Functions
function calculateTotalPoints() {
      const houses = {
        "Vijaya": {
          total: 0,
          color: "vijaya"
        },
        "Tissa": {
          total: 0,
          color: "tissa"
        },
        "Gemunu": {
          total: 0,
          color: "gemunu"
        },
        "Parakrama": {
          total: 0,
          color: "parakrama"
        }
      };

      sportsData.sports.forEach(sport => {
        sport.scores.forEach(score => {
          houses[score.house].total += score.score;
        });
      });

      return Object.entries(houses)
        .map(([name, data]) => ({
          name,
          total: data.total,
          color: data.color
        }))
        .sort((a, b) => b.total - a.total);
    }

    function renderRankings() {
      const rankings = calculateTotalPoints();
      rankingsContainer.innerHTML = '';

      rankings.forEach((house, index) => {
        const rankCard = document.createElement('div');
        rankCard.className = `ranking-card ${index === 0 ? 'highlighted' : ''}`;
        rankCard.dataset.house = house.name;
        rankCard.addEventListener('click', () => showHouseDetails(house.name));

        rankCard.innerHTML = `
        <div class="rank-number">Rank #${index + 1}</div>
        <div class="house-ranking ${house.color}">
          <span class="house-icon">üè†</span>
          <span>${house.name}</span>
        </div>
        <div class="total-score">${house.total}</div>
        `;

        rankingsContainer.appendChild(rankCard);
      });
    }

    // House Details Functions
    function showHouseDetails(houseName) {
      showPage(houseDetailsPage);
      houseDetailsTitle.textContent = `${houseName} House Details`;
      renderHouseSports(houseName);
    }

    function renderHouseSports(houseName) {
      houseSportsContainer.innerHTML = '';

      // Filter sports for selected house
      const houseSports = sportsData.sports.map(sport => ({
        ...sport,
        scores: sport.scores.filter(score => score.house === houseName)
      })).filter(sport => sport.scores.length > 0);

      houseSports.forEach(sport => {
        const sportCard = document.createElement('div');
        sportCard.className = 'sport-card';

        let sportContent = `
        <div class="sport-header">
          <div class="sport-title">${sport.name}</div>
          <div class="sport-subtitle">${sport.venue}</div>
          <div class="sport-date">${sport.date}</div>
        </div>
        `;

        sport.scores.forEach(score => {
          sportContent += `
          <div class="score-item">
            <div class="score-row">
              <div class="house-name ${score.house.toLowerCase()}">${score.house}</div>
              <div class="house-score">${score.score}</div>
            </div>
          </div>
          `;
        });

        sportCard.innerHTML = sportContent;
        houseSportsContainer.appendChild(sportCard);
      });
    }

    // Athletics Details Functions
    function showAthleticsDetails() {
      showPage(athleticsDetailsPage);
      renderAthleticsDetails();
    }

    function renderAthleticsDetails() {
      athleticsContainer.innerHTML = '';
      
      athleticsData.categories.forEach(category => {
        const categoryGroup = document.createElement('div');
        categoryGroup.className = 'category-group';
        
        const categoryHeader = document.createElement('div');
        categoryHeader.className = 'category-header';
        categoryHeader.textContent = category.name;
        categoryGroup.appendChild(categoryHeader);
        
        const categoryEvents = document.createElement('div');
        categoryEvents.className = 'category-events';
        
        category.events.forEach(event => {
          const eventCard = document.createElement('div');
          eventCard.className = 'event-card';
          
          // Event Header
          const eventHeaderContainer = document.createElement('div');
          eventHeaderContainer.className = 'event-header';
          
          const eventName = document.createElement('span');
          eventName.className = 'event-name';
          eventName.textContent = event.name;
          
          const eventLocation = document.createElement('span');
          eventLocation.className = 'event-location';
          eventLocation.textContent = event.location || '';
          
          const eventDate = document.createElement('span');
          eventDate.className = 'event-date';
          eventDate.textContent = event.date || '';
              
          eventHeaderContainer.appendChild(eventName);
          eventHeaderContainer.appendChild(eventLocation);
          eventHeaderContainer.appendChild(eventDate);
          eventCard.appendChild(eventHeaderContainer);
          
          // Event Results
          const eventResults = document.createElement('div');
          eventResults.className = 'event-results';
          
          const maxScore = Math.max(...event.scores.map(item => item.score));
          const sortedHouses = [...event.scores].sort((a, b) => a.house.localeCompare(b.house));
          
          sortedHouses.forEach(score => {
            const percentage = maxScore > 0 ? (score.score / maxScore) * 100 : 0;
            
            const positionResult = document.createElement('div');
            positionResult.className = 'position-result';
            
            const colorDot = document.createElement('div');
            colorDot.className = `color-dot ${score.house.toLowerCase()}`;
            
            const houseName = document.createElement('div');
            houseName.className = `house-name ${score.house.toLowerCase()}`;
            houseName.textContent = score.house;
            
            const scoreValue = document.createElement('div');
            scoreValue.className = 'score-value';
            scoreValue.textContent = score.score;
            
            positionResult.appendChild(colorDot);
            positionResult.appendChild(houseName);
            positionResult.appendChild(scoreValue);
            eventResults.appendChild(positionResult);
            
            // Progress Bar
            const progressContainer = document.createElement('div');
            progressContainer.className = 'progress-container';
            
            const progressBar = document.createElement('div');
            progressBar.className = `progress-bar ${score.house.toLowerCase()}`;
            progressBar.style.width = `${percentage}%`;
            
            progressContainer.appendChild(progressBar);
            eventResults.appendChild(progressContainer);
          });
          
          eventCard.appendChild(eventResults);
          categoryEvents.appendChild(eventCard);
        });
        
        categoryGroup.appendChild(categoryEvents);
        athleticsContainer.appendChild(categoryGroup);
      });
    }

    // Slideshow Functions
    function createSlideshow() {
      slideshowContainer.innerHTML = '';
      slideshowControls.innerHTML = '';
      
      momentsData.moments.forEach((moment, index) => {
        const slide = document.createElement('div');
        slide.className = `slideshow-slide ${index === 0 ? 'active' : ''}`;
        
        const imagePath = moment.image || `/api/placeholder/800/400`;
        const houseColor = moment.house.toLowerCase();
        
        slide.innerHTML = `
          <img src="${imagePath}" alt="${moment.title}" class="slideshow-image">
          <div class="slideshow-caption">
            <div class="slideshow-title">${moment.title}</div>
            <div class="slideshow-description">${moment.description}</div>
            <div class="slideshow-house ${houseColor}">${moment.house} House</div>
          </div>
        `;
        
        slideshowContainer.appendChild(slide);
        
        const indicator = document.createElement('div');
        indicator.className = `slideshow-indicator ${index === 0 ? 'active' : ''}`;
        indicator.dataset.slideIndex = index;
        indicator.addEventListener('click', () => {
          goToSlide(index);
        });
        
        slideshowControls.appendChild(indicator);
      });
    }

    function goToSlide(index) {
      const slides = document.querySelectorAll('.slideshow-slide');
      const indicators = document.querySelectorAll('.slideshow-indicator');
      
      slides.forEach(slide => slide.classList.remove('active'));
      indicators.forEach(indicator => indicator.classList.remove('active'));
      
      slides[index].classList.add('active');
      indicators[index].classList.add('active');
      
      currentSlide = index;
      resetSlideshowTimer();
    }

    function nextSlide() {
      const slides = document.querySelectorAll('.slideshow-slide');
      const nextIndex = (currentSlide + 1) % slides.length;
      goToSlide(nextIndex);
    }

    function startSlideshow() {
      if (!slideshowInterval) {
        slideshowInterval = setInterval(nextSlide, slideshowDelay);
      }
    }

    function stopSlideshow() {
      if (slideshowInterval) {
        clearInterval(slideshowInterval);
        slideshowInterval = null;
      }
    }

    function resetSlideshowTimer() {
      stopSlideshow();
      startSlideshow();
    }

    // Moments Functions
    function renderMoments() {
      momentsContainer.innerHTML = '';
      
      momentsData.moments.forEach(moment => {
        const momentCard = document.createElement('div');
        momentCard.className = 'moment-card';
       
        const imagePath = moment.image || `/api/placeholder/400/200`;
        const houseColor = moment.house.toLowerCase();
        
        const albumLink = moment.album ? 
          `<a href="${moment.album}" class="view-album-link">üì∏ View Album</a>` : '';
        
        momentCard.innerHTML = `
          <img src="${imagePath}" alt="${moment.title}" class="moment-image">
          <div class="moment-content">
            <div class="moment-title">${moment.title}</div>
            <div class="moment-description">${moment.description}</div>
            <div class="moment-footer">
              <div class="moment-house">
                <span class="house-icon ${houseColor}">üè†</span>
                <span class="moment-house-name ${houseColor}">${moment.house} House</span>
              </div>
              ${albumLink}
            </div>
          </div>
        `;
        
        momentsContainer.appendChild(momentCard);
      });
    }

    // Analytics Chart Functions
    const houseColors = {
      'Gemunu': '#2563EB',
      'Vijaya': '#DC2626', 
      'Parakrama': '#FBBF24',
      'Tissa': '#16A34A'
    };

    // Chart Variables
    const houseOptions = document.getElementById('house-options');
    const sportOptions = document.getElementById('sport-options');
    const timeRangeOptions = document.getElementById('time-range-options');
    const lineChartBtn = document.getElementById('line-chart-btn');
    const barChartBtn = document.getElementById('bar-chart-btn');
    const chartDescription = document.getElementById('chart-description');
    const chartCanvas = document.getElementById('performance-chart');

    let performanceChart = null;
    let currentState = {
      selectedHouse: "All Houses",
      selectedSport: "All Sports",
      chartType: "bar",
      timeRange: "5"
    };

    // Filter Options Handler
    function setupFilterOptions(container, stateKey) {
      const options = container.querySelectorAll('.filter-option');
      
      options.forEach(option => {
        option.addEventListener('click', () => {
          options.forEach(opt => opt.classList.remove('active'));
          option.classList.add('active');
          currentState[stateKey] = option.dataset.value;
          updateChartData();
          updateDescription();
        });
      });
    }

    // Initialize Chart
    function initChart() {
      setupFilterOptions(houseOptions, 'selectedHouse');
      setupFilterOptions(sportOptions, 'selectedSport');
      setupFilterOptions(timeRangeOptions, 'timeRange');
      updateChartData();
      updateDescription();
    }

    // Transform Data for Chart
    function transformData() {
      const yearsToInclude = historicalData
        .filter(item => item.year > 2025 - parseInt(currentState.timeRange))
        .map(item => item.year);
      
      const filteredData = historicalData.filter(item => yearsToInclude.includes(item.year));
      const labels = filteredData.map(item => item.year);
      const datasets = [];
      
      const houses = currentState.selectedHouse === "All Houses" 
        ? ["Gemunu", "Vijaya", "Parakrama", "Tissa"] 
        : [currentState.selectedHouse];
      
      houses.forEach(house => {
        const data = filteredData.map(yearData => {
          return currentState.selectedSport === "All Sports"
            ? yearData[house].total
            : yearData[house][currentState.selectedSport] || 0;
        });
        
        datasets.push({
          label: house,
          data: data,
          backgroundColor: houseColors[house] + '80', // Add transparency for bars
          borderColor: houseColors[house],
          borderWidth: 2,
          tension: 0.4,
          fill: false
        });
      });
      
      return { labels, datasets };
    }

    // Update Chart Data
    function updateChartData() {
      const chartData = transformData();
      
      if (performanceChart) {
        performanceChart.destroy();
      }
      
      const ctx = chartCanvas.getContext('2d');
      performanceChart = new Chart(ctx, {
        type: currentState.chartType,
        data: chartData,
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'top',
              labels: {
                color: '#ffffff',
                font: {
                  size: 12
                }
              }
            },
            tooltip: {
              mode: 'index',
              intersect: false,
              backgroundColor: 'rgba(0, 0, 0, 0.8)',
              titleColor: '#ffffff',
              bodyColor: '#ffffff',
              borderColor: '#ffffff',
              borderWidth: 1
            }
          },
          scales: {
            x: {
              title: {
                display: true,
                text: 'Year',
                color: '#ffffff',
                font: {
                  size: 14,
                  weight: 'bold'
                }
              },
              grid: {
                color: 'rgba(255, 255, 255, 0.1)'
              },
              ticks: {
                color: '#ffffff'
              }
            },
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Points',
                color: '#ffffff',
                font: {
                  size: 14,
                  weight: 'bold'
                }
              },
              grid: {
                color: 'rgba(255, 255, 255, 0.1)'
              },
              ticks: {
                color: '#ffffff'
              }
            }
          },
          interaction: {
            intersect: false,
            mode: 'index'
          }
        }
      });
    }

    // Update Chart Description
    function updateDescription() {
      const houseText = currentState.selectedHouse === "All Houses" 
        ? "performance of all houses" 
        : `${currentState.selectedHouse} house's performance`;
      
      const sportText = currentState.selectedSport === "All Sports" 
        ? "overall points" 
        : currentState.selectedSport;
      
      const timeText = currentState.timeRange === "5" 
        ? "last 5 years" 
        : currentState.timeRange === "3" 
          ? "last 3 years" 
          : "last 2 years";
      
      chartDescription.textContent = `This chart shows the ${houseText} in ${sportText} over the ${timeText}.`;
    }

    barChartBtn.addEventListener('click', () => {
      currentState.chartType = 'bar';
      barChartBtn.classList.add('active');
      lineChartBtn.classList.remove('active');
      updateChartData();
    });
    // Chart Type Toggle Event Listeners
    lineChartBtn.addEventListener('click', () => {
      currentState.chartType = 'line';
      lineChartBtn.classList.add('active');
      barChartBtn.classList.remove('active');
      updateChartData();
    });


    // Initialize Application
    function initializeApp() {
      renderSports();
      renderRankings();
      renderMoments();
      createSlideshow();
      showPage(leaderboardPage);
      setActiveTab(leaderboardTab);
    }

    // Start the application when DOM is loaded
    document.addEventListener('DOMContentLoaded', initializeApp);

  </script>
</body>

</html>

